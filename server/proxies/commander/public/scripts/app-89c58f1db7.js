/******/!function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var i=n(1),s=a(i),r=n(16),o=a(r),c=n(22),l=a(c),u=n(23),d=a(u),v=n(24),f=a(v),g=n(25),p=a(g),h=n(26),m=a(h),b=n(27),_=a(b),y=n(28),S=a(y),w=n(29),$=a(w),j=n(30),k=a(j),I=n(31),P=a(I),M=n(32),C=a(M),q=n(33),T=a(q),A=angular.module("myApp",["restangular","ngMessages","ui.router","ui.bootstrap",s["default"].name,o["default"].name]);A.config(l["default"]).config(d["default"]).config(f["default"]),A.service("EventsService",p["default"]).service("IconsService",m["default"]).service("InstancesService",_["default"]).service("InstancesCacheService",S["default"]).service("ScalingService",$["default"]).service("ScalingCacheService",k["default"]).service("StatsService",P["default"]).service("ToastService",C["default"]),A.filter("address",T["default"])},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),s=a(i),r=n(8),o=a(r),c=n(13),l=a(c),u=n(15),d=a(u),v=angular.module("myApp.home",["ui.router",s["default"].name,o["default"].name]);v.config(l["default"]),v.directive("navbar",d["default"]),t["default"]=v},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=a(i),r=n(6),o=a(r),c=n(7),l=a(c),u=angular.module("myApp.home.instances",["ui.router"]);u.config(s["default"]),u.directive("instance",o["default"]).directive("scalingValidator",l["default"]),t["default"]=u},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";e.state("home.instances",{url:"/instances",templateUrl:"app/home/instances/instances.html",controller:r["default"],controllerAs:"vm"})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var s=n(4),r=a(s);i.$inject=["$stateProvider"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=a(r),c=function(){function e(t,n,a,s,r){"ngInject";var o=this;i(this,e),this.$log=t,this.$uibModal=n,this.InstancesCacheService=a,this.ScalingCacheService=s,this.ToastService=r,this.instances=[],this.scaling={min:0,required:0,max:0},this.InstancesCacheService.getAllInstances().then(function(e){return o.instances=e})["catch"](function(e){o.$log.error(e),o.ToastService.error("Cannot load instances")}),this.ScalingCacheService.getScaling().then(function(e){return o.scaling=e})["catch"](function(e){o.$log.error(e),o.ToastService.error("Cannot load scaling")})}return e.$inject=["$log","$uibModal","InstancesCacheService","ScalingCacheService","ToastService"],s(e,[{key:"openScalingModal",value:function(){var e=this,t=this.$uibModal.open({templateUrl:"app/home/instances/scaling/scaling.html",controller:o["default"],controllerAs:"vm",animation:!1,resolve:{scaling:function(){return _.cloneDeep(e.scaling)}}});t.result.then(function(t){return e.ScalingCacheService.updateScaling(t)["catch"](function(t){e.$log.error(t),e.ToastService.error("Cannot update scaling: "+t)})})}}]),e}();t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,a){"ngInject";n(this,e),this.$uibModalInstance=t,this.scaling=a}return e.$inject=["$uibModalInstance","scaling"],a(e,[{key:"ok",value:function(){this.$uibModalInstance.close(this.scaling)}},{key:"cancel",value:function(){this.$uibModalInstance.dismiss("cancel")}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"E",templateUrl:"app/home/instances/instance/instance.html",scope:{},controller:s,controllerAs:"vm",bindToController:{container:"="}};return e}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=function(){function e(t,a,i){"ngInject";n(this,e),this.InstancesCacheService=a,this.IconsService=t,this.ToastService=i}return e.$inject=["IconsService","InstancesCacheService","ToastService"],i(e,[{key:"kill",value:function(){var e=this;this.InstancesCacheService.deleteInstance(this.container.content.name).then(function(){return e.ToastService.success("Remove "+e.container.content.name+" asked.")})["catch"](function(){return e.ToastService.error("Cannot ask to remove "+e.container.content.name)})}}]),e}()},function(e,t){"use strict";function n(){"ngInject";function e(e,t,n,a){a.$validators.scmin=function(t){return t>=e.scmin},a.$validators.scmax=function(t){return t<=e.scmax},e.$watch("scmin",function(){return a.$validate()}),e.$watch("scmax",function(){return a.$validate()})}var t={restrict:"A",require:"ngModel",scope:{scmin:"=",scmax:"="},link:e};return t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),s=a(i),r=n(12),o=a(r),c=angular.module("myApp.home.stats",["ui.router"]);c.config(s["default"]),c.directive("timechart",o["default"]),t["default"]=c},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";e.state("home.stats",{url:"/stats",templateUrl:"app/home/stats/stats.html",controller:r["default"],controllerAs:"vm"})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var s=n(10),r=a(s);i.$inject=["$stateProvider"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=n(11),r=a(s),o=function c(e,t,n){"ngInject";function a(e){n.getAll(e).then(function(t){o.requests.data.clear(e),o.flow.data.clear(e),t.forEach(s)})}function s(e){function t(e){return Math.floor(e/1024)}o.requests.data&&o.requests.data.add({ts:e.ts,label1:e.rq.count,label2:e.rq.duration}),o.flow.data&&o.flow.data.add({ts:e.ts,label1:t(e.flow.bytes_received),label2:t(e.flow.bytes_sent)}),e.global.kbytes_received=t(e.global.bytes_received),delete e.global.bytes_received,e.global.kbytes_sent=t(e.global.bytes_sent),delete e.global.bytes_received,_.merge(o.global,e.global)}i(this,c);var o=this;o.global={},o.scale=6e4,t.$watch("vm.scale",function(e){return a(e)}),o.requests={columns:{label1:"Requests count",label2:"Requests delay (in seconds)"},data:new r["default"](o.scale,60,!1,!0)},o.flow={columns:{label1:"KB received",label2:"KB sent"},data:new r["default"](o.scale,60,!1,!1)};var l=e.$on("stats",function(e,t){return s(t)});t.$on("$destroy",l)};o.$inject=["$rootScope","$scope","StatsService"],t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,a,i,s){n(this,e),this._retention=t,this._maxTick=a,this._samplingTick=Math.floor(this._retention/this._maxTick/1e3),this._avg1=i,this._avg2=s,this._buffer=void 0,this._bufferCount=0,this._items=[]}return a(e,[{key:"add",value:function(e){e&&(e.ts||(e.ts=(new Date).getTime()),this._buffer?this._bufferCount<this._samplingTick?(this._buffer.label1+=e.label1,this._buffer.label2+=e.label2,++this._bufferCount):(this._avg1&&(this._buffer.label1/=this._bufferCount),this._avg2&&(this._buffer.label2/=this._bufferCount),this._items.push({ts:this._buffer.ts,label1:this._buffer.label1,label2:this._buffer.label2}),this._buffer=e,this._bufferCount=1):(this._buffer=e,this._bufferCount=1),this._refresh())}},{key:"getItems",value:function(){return this._refresh(),this._items}},{key:"clear",value:function(e){this._retention=e,this._samplingTick=Math.floor(this._retention/this._maxTick/1e3),this._buffer=void 0,this._bufferCount=0,this._items.length=0}},{key:"_refresh",value:function(){var e=(new Date).getTime()-this._retention;this._items=_.filter(this._items,function(t){return t.ts>e})}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";function e(e,t,n,a){function i(e){!e||e.length<=0?s.unload({ids:["x",a.columns.label1,a.columns.label2]}):!function(){var t=[["x"],[a.columns.label1],[a.columns.label2]];e.forEach(function(e){t[0].push(moment(e.ts).toDate()),t[1].push(e.label1),t[2].push(e.label2)}),s.load({columns:t})}()}t.css("display","block");var s=c3.generate({bindto:t[0],data:{x:"x",columns:[["x"],[a.columns.label1],[a.columns.label2]],axes:{data2:"y2"}},axis:{x:{type:"timeseries",tick:{format:"%H:%M:%S"}},y:{label:{text:a.label1,position:"outer-middle"}},y2:{show:!0,label:{text:a.label2,position:"outer-middle"}}},transition:{duration:0}});e.$watchCollection(function(){return a.data.getItems()},i)}var t={restrict:"E",scope:{},controller:i,controllerAs:"vm",bindToController:{columns:"=",data:"="},link:e};return t}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var i=function s(){"ngInject";n(this,s)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";e.state("home",{"abstract":!0,data:{requiredAuth:!0},url:"/home",templateUrl:"app/home/home.html",controller:r["default"],controllerAs:"vm"})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var s=n(14),r=a(s);i.$inject=["$stateProvider"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function i(e,t,a,s,r,o,c){"ngInject";n(this,i),t.$on("$destroy",function(){s.stop(),o.stop(),a.stop()}),a.start(r.getToken()).then(function(){return c.success("GUI is connected.")})["catch"](function(t){e.error(t),c.error("Cannot connect to daemon.<br/>Please reload GUI.")}),o.getScaling(),s.getAllInstances()};a.$inject=["$log","$scope","EventsService","InstancesCacheService","AuthService","ScalingCacheService","ToastService"],t["default"]=a},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){"ngInject";var e={restrict:"E",templateUrl:"app/home/navbar/navbar.html",scope:{},controller:s,controllerAs:"vm",bindToController:{}};return e}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=a;var s=function(){function e(t,a){"ngInject";n(this,e),this.$state=t,this.AuthService=a}return e.$inject=["$state","AuthService"],i(e,[{key:"logout",value:function(){var e=this;this.AuthService.logout().then(function(){return e.$state.go("login")})}}]),e}()},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),s=a(i),r=n(18),o=a(r),c=n(19),l=a(c),u=n(21),d=a(u),v=angular.module("myApp.login",["ui.router"]);v.config(s["default"]).run(o["default"]),v.config(l["default"]),v.service("AuthService",d["default"]),t["default"]=v},function(e,t){"use strict";function n(e){"ngInject";function t(e,t){function n(t){var n=e.get("AuthService"),a=n.getToken();return a&&(t.headers.Authorization=a),t}function a(n){return(401===n.status||403===n.status)&&!function(){var t=e.get("AuthService"),n=e.get("$state");t.logout()["finally"](function(){return n.go("login")})}(),t.reject(n)}var i={request:n,responseError:a};return i}e.interceptors.push(t),t.$inject=["$injector","$q"]}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.$inject=["$httpProvider"]},function(e,t){"use strict";function n(e,t,n){"ngInject";t.$on("$stateChangeStart",function(t,a){if("login"!==a.name){var i=a.data.requireAuth;if(i){var s=n.getToken();s||(t.preventDefault(),e.go("login"))}}})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.$inject=["$state","$rootScope","AuthService"]},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function i(e){"ngInject";e.state("login",{data:{requiredAuth:!1},url:"/login",templateUrl:"app/login/login.html",controller:r["default"],controllerAs:"vm"})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var s=n(20),r=a(s);i.$inject=["$stateProvider"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,a,i){"ngInject";n(this,e),this.$state=t,this.AuthService=a,this.ToastService=i,this.password=""}return e.$inject=["$state","AuthService","ToastService"],a(e,[{key:"login",value:function(){var e=this;this.AuthService.login(this.password).then(function(){return e.$state.go("home.instances")})["catch"](function(){return e.ToastService.error("Invalid password")})}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){"ngInject";n(this,e),this.$q=t}return e.$inject=["$q"],a(e,[{key:"login",value:function(e){return this.$q(function(t,n){if(!e||e.length<=0)return n("Password is empty");var a=btoa(e);localStorage.setItem("token",a),t()})}},{key:"getToken",value:function(){try{return localStorage.getItem("token")}catch(e){return}}},{key:"logout",value:function(){try{localStorage.removeItem("token")}catch(e){}finally{return this.$q.resolve()}}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e){"ngInject";e.debugEnabled(!1)}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.$inject=["$logProvider"]},function(e,t){"use strict";function n(e){"ngInject";e.otherwise(function(e){var t=e.get("$state");t.go("home.instances")})}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.$inject=["$urlRouterProvider"]},function(e,t){"use strict";function n(e){"ngInject";e.setBaseUrl("/api")}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,n.$inject=["RestangularProvider"]},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,a,i){"ngInject";n(this,e),this.$q=t,this.$log=a,this.$rootScope=i}return e.$inject=["$q","$log","$rootScope"],a(e,[{key:"start",value:function(e){var t=this;return this.$log.debug("[EventService] start"),this.$q(function(n,a){if(!window.io)return a(new Error("Cannot find socket.io"));try{t._socket=window.io.connect("",{path:"/socket.io",query:"token="+encodeURIComponent(e),"force new connection":!0}),t._socket.on("event",function(e){e=angular.fromJson(e),t.$log.debug("[EventService] event '%s': ",e.event,e.payload),t.$rootScope.$apply(function(){return t.$rootScope.$emit(e.event,e.payload)})}),n()}catch(i){a(i)}})}},{key:"stop",value:function(){this.$log.debug("[EventService] stop"),this._socket.disconnect()}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){"ngInject";n(this,e)}return a(e,[{key:"getStatus",value:function(e){switch(e){case"started":return"icon-started";case"stopped":return"icon-stopped";case"starting":return"icon-starting";case"stopping":return"icon-stopping";default:return"icon-unknown"}}},{key:"isAlive",value:function(e){return e?"icon-alive":"icon-dead"}},{key:"getProviderType",value:function(e){switch(e){case"awsec2":return"icon-awsec2";case"digitalocean":return"icon-digitalocean";case"ovhcloud":return"icon-ovhcloud";default:return"icon-unknown"}}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){"ngInject";n(this,e),this.BASE=t.all("instances")}return e.$inject=["Restangular"],a(e,[{key:"getAllInstances",value:function(){return this.BASE.getList()}},{key:"deleteInstance",value:function(e){var t={name:e};return this.BASE.all("stop").post(t)}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,a,i,s,r,o){"ngInject";n(this,e),this.$q=t,this.$log=a,this.$rootScope=i,this.IconsService=s,this.InstancesService=r,this.ToastService=o,this._instances=void 0,this._instancesPromise=void 0,this._unwatchStatusUpdated=void 0,this._unwatchAliveUpdated=void 0}return e.$inject=["$q","$log","$rootScope","IconsService","InstancesService","ToastService"],a(e,[{key:"getAllInstances",value:function(){function e(e,n){function a(e,n){var a=["Instance "+n.name+" updated."];return e.status!==n.status&&a.push('<i class="icon '+t.IconsService.getStatus(e.status)+'"></i>\n                        to\n                        <i class="icon '+t.IconsService.getStatus(n.status)+'"></i>'),e.alive!==n.alive&&a.push('<i class="icon '+t.IconsService.isAlive(e.alive)+'"></i>\n                        to\n                        <i class="icon '+t.IconsService.isAlive(n.alive)+'"></i>'),a.join("<br/>\n")}var i=_.findIndex(t._instances,{content:{name:n.name}});if(i>=0)if("removed"===n.status)t._instances.splice(i,1),t.ToastService.success("Instance "+n.name+" removed.");else{var s=a(t._instances[i].content,n);t._instances[i].content=n,s&&t.ToastService.success(s)}else if("removed"!==n.status){var r={content:n};t._instances.push(r),t.ToastService.success("Instance "+n.name+" created.")}else t.$log.error("Unknown instance "+n.name+" removed.")}var t=this;return t._instances?t.$q.when(t._instances):t._instancesPromise?t._instancesPromise:void(t._instancesPromise=t.InstancesService.getAllInstances().then(function(n){return t._instances=n.map(function(e){return{content:e}}),t._unwatchStatusUpdated=t.$rootScope.$on("status:updated",e),t._unwatchAliveUpdated=t.$rootScope.$on("alive:updated",e),t._instances}))}},{key:"stop",value:function(){this._unwatchStatusUpdated&&(this._unwatchStatusUpdated(),this._unwatchStatusUpdated=void 0),this._unwatchAliveUpdated&&(this._unwatchAliveUpdated(),this._unwatchAliveUpdated=void 0),this._instances=void 0,this._instancesPromise=void 0}},{key:"deleteInstance",value:function(e){return this.InstancesService.deleteInstance(e)}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){"ngInject";n(this,e),this.BASE=t.one("scaling")}return e.$inject=["Restangular"],a(e,[{key:"getScaling",value:function(){return this.BASE.get().then(function(e){return e.plain()})}},{key:"updateScaling",value:function(e){return this.BASE.patch(e).then(function(t){return t?t.plain():e})}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,a,i,s,r){"ngInject";n(this,e),this.$q=t,this.$log=a,this.$rootScope=i,this.ScalingService=s,this.ToastService=r,this._scaling=void 0,this._scalingPromise=void 0,this._unwatchScalingUpdated=void 0}return e.$inject=["$q","$log","$rootScope","ScalingService","ToastService"],a(e,[{key:"getScaling",value:function(){var e=this;return this._scaling?this.$q.when(this._scaling):this._scalingPromise?this._scalingPromise:void(this._scalingPromise=this.ScalingService.getScaling().then(function(t){return e._scaling=t,e._unwatchScalingUpdated=e.$rootScope.$on("scaling:updated",function(t,n){_.merge(e._scaling,n),e.ToastService.success("Scaling updated.")}),e._scaling}))}},{key:"stop",value:function(){this._unwatchScalingUpdated&&(this._unwatchScalingUpdated(),this._unwatchScalingUpdated=void 0),this._scaling=void 0,this._scalingPromise=void 0}},{key:"updateScaling",value:function(e){return this.ScalingService.updateScaling(e)}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t){"ngInject";n(this,e),this.BASE=t.all("stats")}return e.$inject=["Restangular"],a(e,[{key:"getAll",value:function(e){var t={};return e&&(t.retention=e),this.BASE.getList(t).then(function(e){return e.plain()})}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){"ngInject";n(this,e),toastr.options.timeOut=2e3,toastr.options.positionClass="toast-bottom-right",toastr.options.preventDuplicates=!0,toastr.options.progressBar=!1}return a(e,[{key:"success",value:function(e){toastr.success(e)}},{key:"warning",value:function(e){toastr.warning(e)}},{key:"error",value:function(e){toastr.error(e)}}]),e}();t["default"]=i},function(e,t){"use strict";function n(){return function(e){return e&&e.hostname?e.hostname:"no IP"}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n}]),angular.module("myApp").run(["$templateCache",function(e){e.put("app/home/home.html",'<div class="home"><navbar></navbar><div ui-view=""></div></div>'),e.put("app/login/login.html",'<div class="login"><div class="container"><div class="row"><div class="col-md-6 col-md-offset-4"><div class="login-logo"><img src="assets/images/logo400.png"></div><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title">Please sign in</h3></div><div class="panel-body"><form name="myForm" role="form" no-validate="" ng-submit="vm.login()"><fieldset><div class="form-group" ng-class="{\'has-error\': myForm.password.$invalid && myForm.password.$dirty}"><input class="form-control" placeholder="Password" name="password" type="password" ng-model="vm.password" required=""> <span class="help-block" ng-messages="myForm.password.$error" ng-show="myForm.password.$invalid && myForm.password.$dirty"><span ng-message="required">Password is empty</span></span></div><input class="btn btn-lg btn-success btn-block" type="submit" value="Login" ng-disabled="myForm.$invalid"></fieldset></form></div></div></div></div></div></div>'),e.put("app/home/navbar/navbar.html",'<nav class="navbar navbar-default navbar-fixed-top"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle" ng-init="navCollapsed = true" ng-click="navCollapsed = !navCollapsed"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button><div class="navbar-brand"><img src="assets/images/logo35h.png"></div></div><div class="navbar-collapse" ng-class="{collapse: navCollapsed}"><ul class="nav navbar-nav"><li ui-sref-active="active"><a ui-sref="home.instances">Instances</a></li><li ui-sref-active="active"><a ui-sref="home.stats">Stats</a></li></ul><ul class="nav navbar-nav navbar-right"><li><a ng-click="vm.logout()"><i class="icon icon-sign-out"></i> Logout</a></li></ul></div></div></nav>'),e.put("app/home/instances/instances.html",'<section class="instances"><div class="container-fluid"><div class="row"><div class="col-xs-12"><div class="panel panel-default"><div class="panel-heading"><div class="panel-title">Instances<div class="instances-scaling pull-right">Min: <span ng-bind="vm.scaling.min"></span> / Required: <span ng-bind="vm.scaling.required"></span> / Max: <span ng-bind="vm.scaling.max"></span> <button class="btn btn-default btn-xs" type="button" ng-click="vm.openScalingModal()">Scaling</button></div></div></div><div class="panel-body"><div class="row"><div class="col-sm-2" ng-repeat="instance in vm.instances track by instance.content.name" ng-show="vm.instances.length > 0"><instance container="instance"></instance></div><div class="col-sm-12 list-empty" ng-show="vm.instances.length <= 0"><i class="icon icon-empty"></i> <span>No instance found</span></div></div></div></div></div></div></div></section>'),e.put("app/home/stats/stats.html",'<section class="stats"><div class="container-fluid"><div class="row"><div class="col-xs-12"><div class="panel panel-default stats-global"><div class="panel-heading"><div class="panel-title">Global stats<div class="btn-group pull-right" role="group"><button type="button" class="btn btn-default btn-xs" ng-class="{\'active\': vm.scale === 60000}" ng-click="vm.scale = 60000">1m</button> <button type="button" class="btn btn-default btn-xs" ng-class="{\'active\': vm.scale === 3600000}" ng-click="vm.scale = 3600000">1h</button> <button type="button" class="btn btn-default btn-xs" ng-class="{\'active\': vm.scale === 86400000}" ng-click="vm.scale = 86400000">1d</button></div></div></div><div class="panel-body"><div class="row"><div class="stats-global-item col-sm-6">Count of requests: <span ng-bind="vm.global.rq_count"></span></div><div class="stats-global-item col-sm-6">Received: <span ng-bind="vm.global.kbytes_received"></span>kb / Sent: <span ng-bind="vm.global.kbytes_sent"></span>kb</div></div><div class="row"><div class="stats-global-item col-sm-6">Stop orders: <span ng-bind="vm.global.stop_order_count"></span></div><div class="stats-global-item col-sm-6">Requests before stop (min/avg/max): <span ng-if="vm.global.rq_before_stop"><span ng-bind="vm.global.rq_before_stop.min"></span> / <span ng-bind="vm.global.rq_before_stop.avg"></span> / <span ng-bind="vm.global.rq_before_stop.max"></span></span> <span ng-if="!vm.global.rq_before_stop">none</span></div></div></div></div></div><div class="col-xs-12"><div class="panel panel-default"><div class="panel-heading"><div class="panel-title">Requests</div></div><div class="panel-body"><timechart columns="vm.requests.columns" data="vm.requests.data"></timechart></div></div></div><div class="col-xs-12"><div class="panel panel-default"><div class="panel-heading"><div class="panel-title">Flow</div></div><div class="panel-body"><timechart columns="vm.flow.columns" data="vm.flow.data"></timechart></div></div></div></div></div></section>'),e.put("app/home/instances/instance/instance.html",'<div class="instance"><div class="instance-info"><div class="instance-name" ng-bind="vm.container.content.name | limitTo:13"></div><div class="instance-address" ng-bind="vm.container.content.address | address"></div><div class="instance-icons"><div class="instance-type"><i class="icon" ng-class="vm.IconsService.getProviderType(vm.container.content.type)"></i></div><div class="instance-status"><i class="icon" ng-class="vm.IconsService.getStatus(vm.container.content.status)"></i></div><div class="instance-alive"><i class="icon" ng-class="vm.IconsService.isAlive(vm.container.content.alive)"></i></div></div></div><div class="instance-button" ng-click="vm.kill()"><i class="icon icon-stopped"></i></div></div>'),e.put("app/home/instances/scaling/scaling.html",'<div class="modal-container scaling"><div class="modal-header"><h3 class="modal-title">Update scaling</h3></div><div class="modal-body"><form class="form-inline" name="scalingForm"><div class="form-group" ng-class="{\'has-error\': scalingForm.scalingMin.$invalid}"><label for="scalingMin">Min:</label> <input type="number" class="form-control" id="scalingMin" name="scalingMin" ng-model="vm.scaling.min" required=""></div><div class="form-group" ng-class="{\'has-error\': scalingForm.scalingRequired.$invalid}"><label for="scalingRequired">Required:</label> <input type="number" class="form-control" id="scalingRequired" name="scalingRequired" ng-model="vm.scaling.required" scaling-validator="" scmin="vm.scaling.min" scmax="vm.scaling.max" required=""></div><div class="form-group" ng-class="{\'has-error\': scalingForm.scalingMax.$invalid}"><label for="scalingMax">Max:</label> <input type="number" class="form-control" id="scalingMax" name="scalingMax" ng-model="vm.scaling.max" required=""></div><div class="help-block has-error" ng-messages="scalingForm.$error" ng-show="scalingForm.$invalid"><div ng-message="required">All fields are required</div><div ng-message="scmin">Required must be less or equal than Min</div><div ng-message="scmax">Required must be greater or equal than Max</div></div></form></div><div class="modal-footer"><button class="btn btn-primary" type="button" ng-click="vm.ok()" ng-disabled="scalingForm.$invalid">Update</button> <button class="btn btn-warning" type="button" ng-click="vm.cancel()">Cancel</button></div></div>');
}]);
//# sourceMappingURL=../maps/scripts/app-89c58f1db7.js.map
